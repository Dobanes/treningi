<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moje Treningi - Aplikacja</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 10px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; overflow-x: auto; display: block; }
        th, td { border: 1px solid #ccc; padding: 6px; font-size: 12px; }
        th { background-color: #f0f0f0; }
        textarea, input[type="text"], input[type="number"] { width: 100%; box-sizing: border-box; }
        button { padding: 8px; margin: 5px 2px; font-size: 12px; }
        .hidden { display: none; }
        .training-summary { cursor: pointer; background-color: #f9f9f9; padding: 10px; margin-bottom: 5px; border: 1px solid #ccc; font-size: 14px; }
    </style>
</head>
<body>
    <h1 style="font-size:18px; text-align:center;">Moje Treningi</h1>
    <div style="text-align:center; margin-bottom:10px;">
        <button onclick="showSection('list')">üìã Moje Treningi</button>
        <button onclick="showSection('add')">‚ûï Dodaj Trening</button>
    </div>

    <div id="listSection" class="hidden">
        <h2 style="font-size:16px;">Lista Trening√≥w</h2>
        <div id="trainingList"></div>
    </div>

    <div id="addSection">
        <h2 style="font-size:16px;">Dodaj Trening</h2>
        <form id="trainingForm">
            <label style="font-size:14px;">Nazwa treningu: <input type="text" id="title" placeholder="Np. G√≥ra/D√≥≈Ç" required></label><br><br>
            <label style="font-size:14px;">Data treningu: <input type="date" id="date" required></label><br><br>
            <table>
                <thead>
                    <tr>
                        <th>Ozn.</th>
                        <th>ƒÜwiczenie</th>
                        <th>Serie</th>
                        <th>Powt.</th>
                        <th>Przerwa</th>
                        <th>RIR</th>
                        <th>Ciƒô≈ºar</th>
                        <th>Uwagi</th>
                        <th>Akcja</th>
                    </tr>
                </thead>
                <tbody id="exerciseTable">
                    <tr>
                        <td><input type="text" name="label" placeholder="A1"></td>
                        <td><input type="text" name="exercise" required></td>
                        <td><input type="number" name="sets" min="1" required></td>
                        <td><input type="text" name="reps" required></td>
                        <td><input type="text" name="rest"></td>
                        <td><input type="text" name="rir"></td>
                        <td><input type="text" name="weight"></td>
                        <td><textarea name="notes"></textarea></td>
                        <td><button type="button" onclick="removeRow(this)">‚ùå</button></td>
                    </tr>
                </tbody>
            </table>
            <div style="text-align:center;">
                <button type="button" onclick="addRow()">‚ûï Dodaj ƒáwiczenie</button>
                <button type="submit">üíæ Zapisz trening</button>
            </div>
        </form>
    </div>

    <script>
        function showSection(section) {
            document.getElementById('listSection').classList.add('hidden');
            document.getElementById('addSection').classList.add('hidden');
            if (section === 'list') {
                document.getElementById('listSection').classList.remove('hidden');
                renderList();
            } else {
                document.getElementById('addSection').classList.remove('hidden');
            }
        }

        function addRow() {
            const table = document.getElementById('exerciseTable');
            const row = document.createElement('tr');
            row.innerHTML = `<td><input type="text" name="label" placeholder="A1"></td>
                             <td><input type="text" name="exercise" required></td>
                             <td><input type="number" name="sets" min="1" required></td>
                             <td><input type="text" name="reps" required></td>
                             <td><input type="text" name="rest"></td>
                             <td><input type="text" name="rir"></td>
                             <td><input type="text" name="weight"></td>
                             <td><textarea name="notes"></textarea></td>
                             <td><button type="button" onclick="removeRow(this)">‚ùå</button></td>`;
            table.appendChild(row);
        }

        function removeRow(button) {
            const row = button.parentElement.parentElement;
            row.parentElement.removeChild(row);
        }

        function deleteTraining(index) {
            let trainings = JSON.parse(localStorage.getItem('trainings')) || [];
            trainings.splice(index, 1);
            localStorage.setItem('trainings', JSON.stringify(trainings));
            renderList();
        }

        function saveTraining(event) {
            event.preventDefault();
            const title = document.getElementById('title').value;
            const date = document.getElementById('date').value;
            const exercises = [];
            document.querySelectorAll('#exerciseTable tr').forEach(row => {
                const label = row.querySelector('[name="label"]').value;
                const exercise = row.querySelector('[name="exercise"]').value;
                const sets = row.querySelector('[name="sets"]').value;
                const reps = row.querySelector('[name="reps"]').value;
                const rest = row.querySelector('[name="rest"]').value;
                const rir = row.querySelector('[name="rir"]').value;
                const weight = row.querySelector('[name="weight"]').value;
                const notes = row.querySelector('[name="notes"]').value;
                exercises.push({ label, exercise, sets, reps, rest, rir, weight, notes });
            });

            let trainings = JSON.parse(localStorage.getItem('trainings')) || [];
            trainings.push({ title, date, exercises });
            localStorage.setItem('trainings', JSON.stringify(trainings));

            document.getElementById('trainingForm').reset();
            document.getElementById('exerciseTable').innerHTML = `<tr>
                <td><input type="text" name="label" placeholder="A1"></td>
                <td><input type="text" name="exercise" required></td>
                <td><input type="number" name="sets" min="1" required></td>
                <td><input type="text" name="reps" required></td>
                <td><input type="text" name="rest"></td>
                <td><input type="text" name="rir"></td>
                <td><input type="text" name="weight"></td>
                <td><textarea name="notes"></textarea></td>
                <td><button type="button" onclick="removeRow(this)">‚ùå</button></td>
            </tr>`;
            showSection('list');
        }

        function renderList() {
            const container = document.getElementById('trainingList');
            container.innerHTML = '';
            const trainings = JSON.parse(localStorage.getItem('trainings')) || [];
            if (trainings.length === 0) {
                container.innerHTML = '<p>Brak zapisanych trening√≥w.</p>';
                return;
            }
            trainings.slice().reverse().forEach((t, index) => {
                const summaryDiv = document.createElement('div');
                summaryDiv.className = 'training-summary';
                summaryDiv.textContent = `${t.date} - ${t.title} (kliknij, aby zobaczyƒá szczeg√≥≈Çy)`;
                summaryDiv.addEventListener('click', () => showDetails(index));
                container.appendChild(summaryDiv);

                const detailsDiv = document.createElement('div');
                detailsDiv.className = 'hidden';
                detailsDiv.id = `details-${index}`;

                let detailTable = '<table><thead><tr><th>Ozn.</th><th>ƒÜwiczenie</th><th>Serie</th><th>Powt.</th><th>Przerwa</th><th>RIR</th><th>Ciƒô≈ºar</th><th>Uwagi</th></tr></thead><tbody>';
                t.exercises.forEach(e => {
                    detailTable += `<tr><td>${e.label}</td><td>${e.exercise}</td><td>${e.sets}</td><td>${e.reps}</td><td>${e.rest}</td><td>${e.rir}</td><td>${e.weight}</td><td>${e.notes || '-'}</td></tr>`;
                });
                detailTable += '</tbody></table>';
                detailTable += `<div style="text-align:center;"><button onclick="deleteTraining(${trainings.length - 1 - index})">üóë Usu≈Ñ ten trening</button></div>`;

                detailsDiv.innerHTML = detailTable;
                container.appendChild(detailsDiv);
            });
        }

        function showDetails(index) {
            const detailsDiv = document.getElementById(`details-${index}`);
            if (detailsDiv.classList.contains('hidden')) {
                detailsDiv.classList.remove('hidden');
            } else {
                detailsDiv.classList.add('hidden');
            }
        }

        document.getElementById('trainingForm').addEventListener('submit', saveTraining);
        renderList();
    </script>
</body>
</html>
